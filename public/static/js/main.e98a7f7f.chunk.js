(this["webpackJsonpfrontend-pianochannel"]=this["webpackJsonpfrontend-pianochannel"]||[]).push([[0],{21:function(e,t,a){},34:function(e,t,a){e.exports=a(65)},39:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(31),r=a.n(l),c=a(3),i=(a(39),a(2)),o=a(5),m=a(7),u=a(6);a(21);function d(){return s.a.createElement("div",{className:"header"},s.a.createElement("img",{src:"https://www.pianolessenamsterdam.nl/wp-content/uploads/2017/08/PianolessenAmsterdam.png",alt:"Pianolessen Amsterdam"}))}var p=a(14),h=a.n(p),f=function e(){var t=this;Object(i.a)(this,e),this.signup=function(e,a){return t.service.post("/auth/signup",{username:e,password:a}).then((function(e){return e.data}))},this.login=function(e,a){return console.log("https://pianolessenamsterdam.herokuapp.com"),t.service.post("/auth/login",{username:e,password:a}).then((function(e){return e.data}))},this.isAuthenticated=function(){return t.service.get("/auth/isLoggedIn").then((function(e){return e.data}))},this.logOut=function(){return t.service.post("/auth/logout").then((function(e){return e.data}))},this.service=h.a.create({baseURL:"".concat("https://pianolessenamsterdam.herokuapp.com","/"),withCredentials:!0})},E=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).logoutUser=function(){console.log(n.props),n.service.logOut().then((function(){n.setState({loggedInUser:null}),console.log(n.props),n.props.setUser({username:null,role:null,loggedInUser:null})}))},n.state={loggedInUser:null,username:null,role:null,active:!0},n.service=new f,n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"profile-options is-fullwidth"},s.a.createElement("div",{className:"tabs is-fullwidth is-medium"},s.a.createElement("ul",null,s.a.createElement("li",{className:"link"},s.a.createElement(c.c,{to:"/students",activeStyle:{color:"red"}},s.a.createElement("span",{className:"icon"},s.a.createElement("i",{className:"fa fa-thumbs-up"})),s.a.createElement("span",null,"Students"))),s.a.createElement("li",{className:"link"},s.a.createElement(c.c,{to:"/videos",activeStyle:{color:"red"}},s.a.createElement("span",{className:"icon"},s.a.createElement("i",{className:"fa fa-search"})),s.a.createElement("span",null,"Videos"))),s.a.createElement("li",{className:"link"},s.a.createElement(c.c,{to:"/login",onClick:function(){return e.logoutUser()},activeStyle:{color:"red"}},s.a.createElement("span",{className:"icon"},s.a.createElement("i",{className:"fa fa-balance-scale"})),s.a.createElement("span",null,"Logout"))))))}}]),a}(n.Component),g=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).logoutUser=function(){console.log(n.props),n.service.logOut().then((function(){n.setState({loggedInUser:null}),console.log(n.props),n.props.setUser({username:null,role:null,loggedInUser:null})}))},n.state={loggedInUser:null,username:null,role:null},n.service=new f,n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.userInSession,t=e.username,a=e.loggedInUser;this.setState({username:t,loggedInUser:a})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"profile-options is-fullwidth"},s.a.createElement("div",{className:"tabs is-fullwidth is-medium"},s.a.createElement("ul",null,s.a.createElement("li",{className:"link"},s.a.createElement(c.c,{to:"/myprofile/".concat(this.state.username),activeStyle:{color:"red"}},s.a.createElement("span",{className:"icon"},s.a.createElement("i",{className:"fa fa-thumbs-up"})),s.a.createElement("span",null,"Profile"))),s.a.createElement("li",{className:"link"},s.a.createElement(c.c,{to:"/login",onClick:function(){return e.logoutUser()},activeStyle:{color:"red"}},s.a.createElement("span",{className:"icon"},s.a.createElement("i",{className:"fa fa-balance-scale"})),s.a.createElement("span",null,"Logout"))))))}}]),a}(n.Component),v=a(12),N=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:"",service:new f,formSubmit:!1},e.handleSubmit=function(t){t.preventDefault();var a=e.state.username,n=e.state.password;e.state.service.login(a,n).then((function(t){e.setState({username:"",password:"",formSubmit:!0}),console.log(t),e.props.setUser(t)})).catch((function(e){return console.log(e)}))},e.handleInput=function(t){var a=t.target,n=a.name,s=a.value;e.setState(Object(v.a)({},n,s))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"form-container"},s.a.createElement("form",{className:"signup-form",onSubmit:function(t){return e.handleSubmit(t)}},s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control has-icons-left has-icons-right"},s.a.createElement("input",{className:"input",type:"email",name:"username",value:this.state.username,onChange:function(t){return e.handleInput(t)},placeholder:"Email"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement("i",{className:"fas fa-envelope"})),s.a.createElement("span",{className:"icon is-small is-right"},s.a.createElement("i",{className:"fas fa-check"})))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("input",{className:"input",type:"password",placeholder:"Password",name:"password",value:this.state.password,onChange:function(t){return e.handleInput(t)}}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement("i",{className:"fas fa-lock"})))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:"button is-success",type:"submit"},"Login")),"          "),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},"Don't have account?",s.a.createElement(c.b,{to:"/signup"}," Signup")))),s.a.createElement("p",null)))}}]),a}(n.Component),b=a(1),S=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:"",service:new f,submitted:!1},e.handleSubmit=function(t){t.preventDefault(),console.log(e.state),e.state.service.signup(e.state.username,e.state.password).then((function(t){e.setState({submitted:!0,username:"",password:""})}))},e.handleInput=function(t){var a=t.target,n=a.name,s=a.value;e.setState(Object(v.a)({},n,s))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=window.location.href,t=new URL(e).searchParams.get("mail");console.log(t),this.setState({username:t})}},{key:"render",value:function(){var e=this;return this.state.submitted?s.a.createElement(b.a,{to:"/login"}):s.a.createElement("div",{className:"form-container"},s.a.createElement("form",{className:"signup-form",onSubmit:function(t){return e.handleSubmit(t)}},s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control has-icons-left has-icons-right"},s.a.createElement("input",{className:"input",type:"email",name:"username",value:this.state.username,onChange:function(t){return e.handleInput(t)},placeholder:"Email"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement("i",{className:"fas fa-envelope"})),s.a.createElement("span",{className:"icon is-small is-right"},s.a.createElement("i",{className:"fas fa-check"})))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("input",{className:"input",type:"password",placeholder:"Password",name:"password",value:this.state.password,onChange:function(t){return e.handleInput(t)}}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement("i",{className:"fas fa-lock"})))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:"button is-success",type:"submit"},"Signup"))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},"Already have an account?",s.a.createElement(c.b,{to:"/login"}," Login")))))}}]),a}(n.Component),w=h.a.create({baseURL:"".concat("https://pianolessenamsterdam.herokuapp.com","/admin")}),y={fetchVideos:function(){return w.post("/videos")},fetchVideo:function(e){return w.post("/video",e)},fetchStudents:function(){return w.post("/students")},fetchStudentsVideo:function(e){return w.post("/students-video",e)},tagVideo:function(e){return w.post("/tagvideo",e)},untagVideo:function(e){return w.post("/untagvideo",e)},mailNewUser:function(e){return w.post("/mail-user",{email:e})},sendNotifications:function(e){return console.log(e),w.post("/send-notification",e)}},k=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,s=a.value;e.setState(Object(v.a)({},n,s))},e.onSubmit=function(t){t.preventDefault(),y.mailNewUser(e.state.email),e.setState({email:"",showMessage:!0,tempMail:e.state.email}),setTimeout((function(){e.setState({showMessage:!1})}),2e3)},e.state={users:[],email:"",tempMail:"",showMessage:!1},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;y.fetchStudents().then((function(t){e.setState({users:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"box"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-2-tablet is-4-mobile has-text-centered"},s.a.createElement("p",{className:"stat-val"},this.state.totalVideos)),s.a.createElement("div",{className:"column is-8"},s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",onChange:function(t){return e.handleChange(t)},name:"email",value:this.state.email,type:"email",placeholder:"Email adress"})),s.a.createElement("div",{className:"control"},s.a.createElement("a",{href:"/students",onClick:function(t){return e.onSubmit(t)},className:"button is-info"},"Invite student"))),this.state.showMessage&&s.a.createElement("div",{className:"notification is-success"}," An invitation has been send to ",this.state.tempMail)))),s.a.createElement("table",{className:"table is-bordered is-striped is-narrow is-hoverable is-fullwidth"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Profile picture"),s.a.createElement("th",null,"Name"),s.a.createElement("th",null,"Surname"),s.a.createElement("th",null,"Email"),s.a.createElement("th",null,"Telephone"))),s.a.createElement("tbody",null,this.state.users.map((function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,s.a.createElement("span",{className:"student-profile-small"},s.a.createElement("img",{src:e.image,alt:e.name}))),s.a.createElement("td",null,e.name),s.a.createElement("td",null,e.surname),s.a.createElement("td",null,e.username),s.a.createElement("td",null,e.number))})))))}}]),a}(n.Component),U=a(16),O=a.n(U),j=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={videos:[],filteredData:[],totalVideos:0,taggedVideo:"",taggedStudent:"",loading:!0,searchValue:"",showVideoCardModal:""},e.showModal=function(){e.setState({showVideoCardModal:!0})},e.hideModal=function(){e.setState({showVideoCardModal:!1})},e.inputSearchHandler=function(t){console.log(t);var a=e.state.videos.filter((function(e){return e.snippet.title.toLowerCase().includes(t)}));console.log(a),e.setState({searchValue:t,filteredData:a})},e.untagUser=function(t,a){console.log(a,t);var n={username:a,videoID:t};y.untagVideo(n).then((function(){e.setState({taggedStudent:a}),e.getNewData()})).catch((function(e){return console.log(e)}))},e}return Object(o.a)(a,[{key:"getNewData",value:function(){var e=this;y.fetchVideos().then((function(t){console.log(t.data),e.setState({videos:t.data,filteredData:t.data,totalVideos:t.data.length,loading:!1})})).catch((function(e){return console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;y.fetchVideos().then((function(t){console.log(t.data),e.setState({videos:t.data,filteredData:t.data,totalVideos:t.data.length,loading:!1})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return this.state.loading?s.a.createElement("p",{className:"columns is-centered"},"Loading videos"):0===this.state.filteredData.length?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"box"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-2-tablet is-4-mobile has-text-centered"},s.a.createElement("p",{className:"stat-val"},this.state.totalVideos),s.a.createElement("p",{className:"stat-key"},"Videos")),s.a.createElement("div",{className:"column is-8"},s.a.createElement("p",{className:"control has-addons"},s.a.createElement("input",{className:"input",placeholder:"Search videos",onChange:function(t){return e.inputSearchHandler(t.target.value)},value:this.searchValue,type:"text"}))),"     ")),s.a.createElement("p",{className:"columns is-centered"},"There are no results"),s.a.createElement("p",null)):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"box"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-2-tablet is-4-mobile has-text-centered"},s.a.createElement("p",{className:"stat-val"},this.state.totalVideos),s.a.createElement("p",{className:"stat-key"},"Videos")),s.a.createElement("div",{className:"column is-8"},s.a.createElement("p",{className:"control has-addons"},s.a.createElement("input",{className:"input",placeholder:"Search videos",onChange:function(t){return e.inputSearchHandler(t.target.value)},value:this.searchValue,type:"text"}))))),s.a.createElement("div",{className:"video-container"},this.state.filteredData.map((function(e,t){return s.a.createElement("div",{className:"card-video",key:e.id},s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"content"},s.a.createElement("p",null,s.a.createElement(O.a,{format:"D MMM YYYY"},e.snippet.publishedAt)),s.a.createElement("p",{className:"title is-5"},e.snippet.title),s.a.createElement("p",null),e.users.map((function(e,t){return s.a.createElement("span",{key:t,className:"student-profile-small"},s.a.createElement("img",{src:e.image,alt:e.name}))})),s.a.createElement("p",null),s.a.createElement(c.b,{to:"/video/".concat(e._id),className:"button is-info is-small"},"Tag students"))))}))))}}]),a}(n.Component),C=a(33),V=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).tagUser=function(t){var a={username:t,videoID:e.state.taggedVideo._id};y.tagVideo(a).then((function(){e.setState({taggedStudent:t});var a=Object(C.a)(e.state.taggedStudentsArr);a.push(e.state.taggedStudent),e.getNewData(),e.setState({taggedStudentsArr:a})})).catch((function(e){return console.log(e)}))},e.untagUser=function(t){var a={username:t,videoID:e.state.taggedVideo._id};y.untagVideo(a).then((function(){e.setState({taggedStudent:t}),e.getNewData()})).catch((function(e){return console.log(e)}))},e.sendNotifications=function(){y.sendNotifications({taggedStudentsArr:e.state.taggedStudentsArr,videoID:e.state.taggedVideo})},e.state={students:[],taggedVideo:"",taggedStudent:"",loading:!0,taggedStudentsArr:[]},e}return Object(o.a)(a,[{key:"getNewData",value:function(){var e=this;y.fetchVideo({videoID:this.props.match.params.id}).then((function(t){e.setState({taggedVideo:t.data,loading:!1}),y.fetchStudentsVideo({videoID:e.state.taggedVideo._id}).then((function(t){e.setState({students:t.data})}))}))}},{key:"componentDidMount",value:function(){this.getNewData()}},{key:"render",value:function(){var e=this;if(this.state.loading)return s.a.createElement("div",null,"Loading");var t=this.state.taggedVideo.snippet.title;return s.a.createElement("div",{className:"card-video"},s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"content"},s.a.createElement("h2",{className:"video-modal"},t),s.a.createElement("p",null),this.state.taggedVideo.users.map((function(t,a){return s.a.createElement("div",{key:a},s.a.createElement("span",{key:a,className:"student-profile-small"}," ",s.a.createElement("img",{alt:t.username,src:t.image})),s.a.createElement("button",{className:"button is-danger is-small ml-6",onClick:function(a){return e.untagUser(t.username)}},s.a.createElement("span",null,"Untag student"),s.a.createElement("span",{className:"icon is-small"},s.a.createElement("i",{className:"delete"})))," ")})),s.a.createElement("p",null),this.state.students.map((function(t,a){return s.a.createElement("div",{key:a},s.a.createElement("span",{key:a,className:"student-profile-small mr-6"}," ",s.a.createElement("img",{alt:t.username,src:t.image}))," ",s.a.createElement("button",{className:"button is-success is-small",onClick:function(a){return e.tagUser(t.username)}},"Tag user"))})),s.a.createElement("p",null),s.a.createElement(c.b,{to:"/videos",onClick:function(){return e.sendNotifications()}},"Back to videos"))))}}]),a}(n.Component),D=h.a.create({baseURL:"".concat("https://pianolessenamsterdam.herokuapp.com","/user")}),I={FetchProfileStudent:function(e){return D.post("/profile-student",e)},UpdateProfileStudent:function(e){return D.post("/update-profile-student",e)},handleFileUpload:function(e){return D.post("/profileimage",e).then((function(e){return e.data}))}},M=(a(64),function(e){var t=e.handleClose,a=e.handleSave,n=e.handleInput,l=e.show,r=e.name,c=e.username,i=e.surname,o=e.number,m=e.bio,u=e.handleFileUpload,d=e.image,p=l?"display-block":"display-none";return s.a.createElement("div",{className:p},s.a.createElement("div",{className:"modal-background"}),s.a.createElement("div",{className:"modal-card"},s.a.createElement("header",{className:"modal-card-head"},s.a.createElement("p",{className:"modal-card-title"},"Edit Preferences"),s.a.createElement("button",{onClick:t,className:"delete"},"close")),s.a.createElement("section",{className:"modal-card-body"},s.a.createElement("span",{className:"student-profile-big"},s.a.createElement("img",{alt:r,src:d})),s.a.createElement("input",{type:"file",onChange:function(e){return u(e)}}),s.a.createElement("label",{className:"label"},"Name"),s.a.createElement("input",{className:"input",onChange:n,placeholder:"Text input",name:"name",type:"text",value:r}),s.a.createElement("label",{className:"label"},"Surname"),s.a.createElement("input",{className:"input",onChange:n,placeholder:"Text input",name:"surname",type:"text",value:i}),s.a.createElement("label",{className:"label"},"Email"),s.a.createElement("input",{className:"input",onChange:n,placeholder:"Email input",name:"username",type:"text",value:c}),s.a.createElement("i",{className:"fa fa-warning"}),s.a.createElement("label",{className:"label"},"Description"),s.a.createElement("textarea",{className:"textarea",onChange:n,placeholder:"Describe Yourself!",name:"bio",value:m}),s.a.createElement("label",{className:"label"},"Phone Number"),s.a.createElement("input",{className:"input",onChange:n,placeholder:"Text input",name:"number",type:"text",value:o}),s.a.createElement("label",{className:"label"},"Send me notifications for every new video"),s.a.createElement("div",{class:"field"},s.a.createElement("input",{className:"is-checkradio is-success is-circle",type:"checkbox",name:"email"}),s.a.createElement("label",{for:"email"}," E-mail"))),s.a.createElement("footer",{className:"modal-card-foot"},s.a.createElement("a",{className:"button is-primary modal-save",href:"/save",onClick:function(e){return a(e)}},"Save changes"),s.a.createElement("button",{onClick:t},"close"))))}),x=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={username:e.props.user,loading:!0,role:"",videos:[],totalVideos:0,name:"",surname:"",bio:"",image:"",show:!1},e.showModal=function(){e.setState({show:!0})},e.hideModal=function(){e.setState({show:!1})},e.savePreferences=function(t){t.preventDefault(),e.setState({show:!1}),I.UpdateProfileStudent(e.state)},e.handleInput=function(t){var a=t.target,n=a.name,s=a.value;e.setState(Object(v.a)({},n,s))},e.handleFileUpload=function(t){var a=new FormData;a.append("image",t.target.files[0]),a.append("username",e.state.username),I.handleFileUpload(a).then((function(t){console.log("response is: ",t),e.setState({image:t})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;I.FetchProfileStudent({username:this.state.username}).then((function(t){var a=t.data[0],n=a.name,s=a.surname,l=a.number,r=a.videos,c=a.bio,i=a.role,o=a.image;e.setState({videos:r,totalVideos:r.length,name:n,surname:s,number:l,bio:c,role:i,image:o,loading:!1})}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"container profile"},s.a.createElement("div",{className:"section profile-heading"},s.a.createElement("div",{className:"columns is-mobile is-multiline"},s.a.createElement("div",{className:"column is-2"},s.a.createElement("span",{className:"student-profile-big"},s.a.createElement("img",{alt:this.state.name,src:this.state.image}))),s.a.createElement("div",{className:"column is-4-tablet is-10-mobile name"},s.a.createElement("p",null,s.a.createElement("span",{className:"title is-bold"},this.state.name," ",this.state.surname),s.a.createElement("br",null),s.a.createElement(M,{show:this.state.show,name:this.state.name,surname:this.state.surname,number:this.state.number,image:this.state.image,username:this.state.username,description:this.state.bio,handleSave:this.savePreferences,handleClose:this.hideModal,handleInput:this.handleInput,handleFileUpload:this.handleFileUpload}),s.a.createElement("button",{type:"button",className:"button is-primary is-outlined",onClick:this.showModal},"Edit preferences"),s.a.createElement("br",null)),s.a.createElement("p",{className:"tagline"},this.state.bio)),s.a.createElement("div",{className:"column is-2-tablet is-4-mobile has-text-centered"},s.a.createElement("p",{className:"stat-val"},this.state.totalVideos),s.a.createElement("p",{className:"stat-key"},"videos")))),s.a.createElement("div",{className:"video-container"},this.state.videos.map((function(e,t){return s.a.createElement("div",{className:"card-video",key:e.id},s.a.createElement("div",{className:"card-image"},s.a.createElement("iframe",{allowtransparency:"true",title:t,width:"300",height:"215",src:"https://www.youtube.com/embed/"+e.snippet.resourceId.videoId,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"content"},s.a.createElement("p",null,s.a.createElement(O.a,{format:"D MMM YYYY"},e.snippet.publishedAt)),s.a.createElement("p",{className:"title is-5"},e.snippet.title),s.a.createElement("p",null,e.snippet.description))))}))))}}]),a}(n.Component),A=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).checkAuthenticated=function(){console.log("check authenticated"),null===n.state.username&&n.service.isAuthenticated().then((function(e){console.log(e),n.setState({username:e.username,role:e.role,loading:!1})})).catch((function(e){n.setState({username:!1,role:!1,loading:!1})}))},n.setUser=function(e){console.log(e),n.setState({username:e.username,role:e.role})},n.state={videos:[],role:null,username:null,loggedInUser:null,loading:!1},n.service=new f,n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return this.checkAuthenticated(),this.state.loading?s.a.createElement("p",null,"loading"):"ADMIN"===this.state.role?s.a.createElement("div",null,s.a.createElement(b.a,{to:"/students/"}),s.a.createElement(d,null),s.a.createElement(E,{userInSession:this.state.loggedInUser,setUser:this.setUser}),s.a.createElement(b.d,null,s.a.createElement(b.b,{path:"/students",component:k}),s.a.createElement(b.b,{exact:!0,path:"/videos",component:j}),s.a.createElement(b.b,{exact:!0,path:"/video/:id",component:V}))):"USER"===this.state.role?s.a.createElement("div",null,s.a.createElement(b.a,{to:"/myprofile/".concat(this.state.username)}),s.a.createElement(d,null),s.a.createElement(g,{userInSession:this.state,setUser:this.setUser}),s.a.createElement(b.d,null,s.a.createElement(b.b,{exact:!0,path:"/myprofile/:id"},s.a.createElement(x,{user:this.state.username,setUser:this.setUser})))):s.a.createElement("div",null,s.a.createElement(d,null),s.a.createElement(b.d,null,s.a.createElement(b.b,{exact:!0,path:"/"},s.a.createElement("h3",null,"Home "),s.a.createElement(c.b,{to:"/login"},"Login"),s.a.createElement("p",null),s.a.createElement(c.b,{to:"signup"},"Signup")),s.a.createElement(b.b,{path:"/login",render:function(){return s.a.createElement(N,{setUser:e.setUser})}}),s.a.createElement(b.b,{path:"/signup",component:S})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(c.a,null,s.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.e98a7f7f.chunk.js.map