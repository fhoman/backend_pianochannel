(this["webpackJsonpfrontend-pianochannel"]=this["webpackJsonpfrontend-pianochannel"]||[]).push([[0],{24:function(e,t,a){},40:function(e,t,a){e.exports=a(81)},45:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(20),c=a.n(s),r=a(7),i=(a(45),a(2)),o=a(4),m=a(6),u=a(5);a(24),a(46);function d(){return l.a.createElement("div",{className:"header"},l.a.createElement("div",null,l.a.createElement("img",{src:"https://www.pianolessenamsterdam.nl/wp-content/uploads/2017/08/PianolessenAmsterdam.png",alt:"Pianolessen Amsterdam"})))}var h=a(16),p=a.n(h),f=function e(){var t=this;Object(i.a)(this,e),this.signup=function(e,a){return t.service.post("/auth/signup",{username:e,password:a}).then((function(e){return console.log(e),e}))},this.login=function(e,a){return t.service.post("/auth/login",{username:e,password:a}).then((function(e){return e.data}))},this.isAuthenticated=function(){return t.service.get("/auth/isLoggedIn").then((function(e){return e.data}))},this.logOut=function(){return t.service.post("/auth/logout").then((function(e){return e.data}))},this.service=p.a.create({baseURL:"".concat("https://pianolessenamsterdam.herokuapp.com/api","/"),withCredentials:!0})},E=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).logoutUser=function(){console.log(n.props),n.service.logOut().then((function(){n.setState({loggedInUser:null}),console.log(n.props),n.props.setUser({username:null,role:null,loggedInUser:null})}))},n.state={loggedInUser:null,username:null,role:null,active:!0},n.service=new f,n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"profile-options is-fullwidth"},l.a.createElement("div",{className:"tabs is-fullwidth is-medium"},l.a.createElement("ul",null,l.a.createElement("li",{className:"link"},l.a.createElement(r.c,{to:"/students",activeStyle:{color:"red"}},l.a.createElement("span",{className:"icon"},l.a.createElement("i",{className:"fa fa-thumbs-up"})),l.a.createElement("span",null,"Students"))),l.a.createElement("li",{className:"link"},l.a.createElement(r.c,{to:"/videos",activeStyle:{color:"red"}},l.a.createElement("span",{className:"icon"},l.a.createElement("i",{className:"fa fa-search"})),l.a.createElement("span",null,"Videos"))),l.a.createElement("li",{className:"link"},l.a.createElement(r.c,{to:"/login",onClick:function(){return e.logoutUser()},activeStyle:{color:"red"}},l.a.createElement("span",{className:"icon"},l.a.createElement("i",{className:"fa fa-balance-scale"})),l.a.createElement("span",null,"Logout"))))))}}]),a}(n.Component),g=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).logoutUser=function(){console.log(n.props),n.service.logOut().then((function(){n.setState({loggedInUser:null}),console.log(n.props),n.props.setUser({username:null,role:null,loggedInUser:null})}))},n.state={loggedInUser:null,username:null,role:null},n.service=new f,n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.userInSession,t=e.username,a=e.loggedInUser;this.setState({username:t,loggedInUser:a})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"profile-options is-fullwidth"},l.a.createElement("div",{className:"tabs is-fullwidth is-medium"},l.a.createElement("ul",null,l.a.createElement("li",{className:"link"},l.a.createElement(r.c,{to:"/myprofile/".concat(this.state.username),activeStyle:{color:"red"}},l.a.createElement("span",{className:"icon"},l.a.createElement("i",{className:"fa fa-thumbs-up"})),l.a.createElement("span",null,"Profile"))),l.a.createElement("li",{className:"link"},l.a.createElement(r.c,{to:"/login",onClick:function(){return e.logoutUser()},activeStyle:{color:"red"}},l.a.createElement("span",{className:"icon"},l.a.createElement("i",{className:"fa fa-balance-scale"})),l.a.createElement("span",null,"Logout"))))))}}]),a}(n.Component),v=a(13),N=a(1),b=a(11),S=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={username:"",password:"",usernameTemp:"",role:"",service:new f,formSubmit:!1},e.handleSubmit=function(t){t.preventDefault();var a=e.state.username,n=e.state.password;e.state.service.login(a,n).then((function(t){e.setState({username:"",password:"",role:t.role,usernameTemp:t.username,formSubmit:!0}),console.log(e.state),e.props.setUser(t)})).catch((function(e){return console.log(e)}))},e.handleInput=function(t){var a=t.target,n=a.name,l=a.value;e.setState(Object(v.a)({},n,l))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t="/myprofile/".concat(this.state.usernameTemp);return this.state.formSubmit&&"USER"===this.state.role?l.a.createElement(N.a,{to:t}):this.state.formSubmit&&"ADMIN"===this.state.role?l.a.createElement(N.a,{to:"/students/"}):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"columns is-multiline"},l.a.createElement("div",{className:"column is-8 is-offset-2 register"},l.a.createElement("div",{className:"columns is-centered"},l.a.createElement("div",{className:"column is-half"},l.a.createElement("div",{className:"notification is-light"},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Name"),l.a.createElement("div",{className:"control has-icons-left has-icons-right"},l.a.createElement("input",{className:"input",type:"email",value:this.state.username,name:"username",onChange:function(t){return e.handleInput(t)},placeholder:"Email"}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement(b.b,null)),l.a.createElement("span",{className:"icon is-small is-right"},l.a.createElement(b.a,null)))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Password:"),l.a.createElement("p",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"password",value:this.state.password,name:"password",onChange:function(t){return e.handleInput(t)},placeholder:"Password"}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement(b.c,null)))),l.a.createElement("button",{className:"button is-info is-rounded mb-6",onClick:function(t){return e.handleSubmit(t)}},"Login"),l.a.createElement("p",{className:"control mt-6"},"Don't have an account?",l.a.createElement(r.b,{to:"/signup"},"Signup"))))))))}}]),a}(n.Component),w=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={username:"",password:"",service:new f,submitted:!1},e.handleSubmit=function(t){t.preventDefault(),e.state.service.signup(e.state.username,e.state.password).then((function(t){console.log(t.data.user);var a=t.data.user,n=a.username,l=a.password;n&&l&&e.setState({submitted:!0,username:"",password:""})})).catch((function(e){return console.log(e)}))},e.handleInput=function(t){var a=t.target,n=a.name,l=a.value;e.setState(Object(v.a)({},n,l))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=window.location.href,t=new URL(e).searchParams.get("mail");return t&&(console.log(t),this.setState({username:t})),null}},{key:"render",value:function(){var e=this;return this.state.submitted?l.a.createElement(N.a,{to:"/login"}):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"columns is-multiline"},l.a.createElement("div",{className:"column is-8 is-offset-2 register"},l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column left"},l.a.createElement("div",{className:"notification is-light"},l.a.createElement("h1",{className:"title is-1"},"Pianolessen Amsterdam"),l.a.createElement("h2",{className:"subtitle has-text-danger"},"Sign up and check your videos"),l.a.createElement("p",null,"Sign up for an account on Pianolessen Amsterdam and check out all your videos "))),l.a.createElement("div",{className:"column is-half right"},l.a.createElement("div",{className:"notification is-light"},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Name"),l.a.createElement("div",{className:"control has-icons-left has-icons-right"},l.a.createElement("input",{className:"input",type:"email",value:this.state.username,name:"username",onChange:function(t){return e.handleInput(t)},placeholder:"Email"}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement(b.b,null)),l.a.createElement("span",{className:"icon is-small is-right"},l.a.createElement(b.a,null)))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Password:"),l.a.createElement("p",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"password",value:this.state.password,name:"password",onChange:function(t){return e.handleInput(t)},placeholder:"Password"}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement(b.c,null)))),l.a.createElement("button",{className:"button is-info is-rounded mb-6",onClick:function(t){return e.handleSubmit(t)}},"Signup"),l.a.createElement("p",{className:"control mt-6"},"Already have a account?",l.a.createElement(r.b,{to:"/login"},"Login"))))))))}}]),a}(n.Component),y=p.a.create({baseURL:"".concat("https://pianolessenamsterdam.herokuapp.com/api","/admin")}),k={fetchVideos:function(){return y.post("/videos")},fetchVideo:function(e){return y.post("/video",e)},fetchStudents:function(){return y.post("/students")},fetchStudentsVideo:function(e){return y.post("/students-video",e)},tagVideo:function(e){return y.post("/tagvideo",e)},untagVideo:function(e){return y.post("/untagvideo",e)},mailNewUser:function(e){return y.post("/mail-user",{email:e})},sendNotifications:function(e){return console.log(e),y.post("/send-notification",e)}},C=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,l=a.value;e.setState(Object(v.a)({},n,l))},e.onSubmit=function(t){t.preventDefault(),k.mailNewUser(e.state.email),e.setState({email:"",showMessage:!0,tempMail:e.state.email}),setTimeout((function(){e.setState({showMessage:!1})}),2e3)},e.state={users:[],email:"",tempMail:"",showMessage:!1},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;k.fetchStudents().then((function(t){e.setState({users:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",{className:"box"},l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column is-2-tablet is-4-mobile has-text-centered"},l.a.createElement("p",{className:"stat-val"},this.state.totalVideos)),l.a.createElement("div",{className:"column is-8"},l.a.createElement("div",{className:"field has-addons"},l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",onChange:function(t){return e.handleChange(t)},name:"email",value:this.state.email,type:"email",placeholder:"Email adress"})),l.a.createElement("div",{className:"control"},l.a.createElement("a",{href:"/students",onClick:function(t){return e.onSubmit(t)},className:"button is-info"},"Invite student"))),this.state.showMessage&&l.a.createElement("div",{className:"notification is-success"}," An invitation has been send to ",this.state.tempMail)))),l.a.createElement("table",{className:"table is-bordered is-striped is-narrow is-hoverable is-fullwidth"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Profile picture"),l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Surname"),l.a.createElement("th",null,"Email"),l.a.createElement("th",null,"Telephone"))),l.a.createElement("tbody",null,this.state.users.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,l.a.createElement("span",{className:"student-profile-small"},l.a.createElement("img",{src:e.image,alt:e.name}))),l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.surname),l.a.createElement("td",null,e.username),l.a.createElement("td",null,e.number))})))))}}]),a}(n.Component),O=a(17),U=a.n(O),j=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={videos:[],filteredData:[],totalVideos:0,taggedVideo:"",taggedStudent:"",loading:!0,searchValue:"",showVideoCardModal:""},e.showModal=function(){e.setState({showVideoCardModal:!0})},e.hideModal=function(){e.setState({showVideoCardModal:!1})},e.inputSearchHandler=function(t){console.log(t);var a=e.state.videos.filter((function(e){return e.snippet.title.toLowerCase().includes(t)}));console.log(a),e.setState({searchValue:t,filteredData:a})},e.untagUser=function(t,a){console.log(a,t);var n={username:a,videoID:t};k.untagVideo(n).then((function(){e.setState({taggedStudent:a}),e.getNewData()})).catch((function(e){return console.log(e)}))},e}return Object(o.a)(a,[{key:"getNewData",value:function(){var e=this;k.fetchVideos().then((function(t){console.log(t.data),e.setState({videos:t.data,filteredData:t.data,totalVideos:t.data.length,loading:!1})})).catch((function(e){return console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;k.fetchVideos().then((function(t){console.log(t.data),e.setState({videos:t.data,filteredData:t.data,totalVideos:t.data.length,loading:!1})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return this.state.loading?l.a.createElement("p",{className:"columns is-centered"},"Loading videos"):0===this.state.filteredData.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"box"},l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column is-2-tablet is-4-mobile has-text-centered"},l.a.createElement("p",{className:"stat-val"},this.state.totalVideos),l.a.createElement("p",{className:"stat-key"},"Videos")),l.a.createElement("div",{className:"column is-8"},l.a.createElement("p",{className:"control has-addons"},l.a.createElement("input",{className:"input",placeholder:"Search videos",onChange:function(t){return e.inputSearchHandler(t.target.value)},value:this.searchValue,type:"text"}))),"     ")),l.a.createElement("p",{className:"columns is-centered"},"There are no results"),l.a.createElement("p",null)):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"box"},l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column is-2-tablet is-4-mobile has-text-centered"},l.a.createElement("p",{className:"stat-val"},this.state.totalVideos),l.a.createElement("p",{className:"stat-key"},"Videos")),l.a.createElement("div",{className:"column is-8"},l.a.createElement("p",{className:"control has-addons"},l.a.createElement("input",{className:"input",placeholder:"Search videos",onChange:function(t){return e.inputSearchHandler(t.target.value)},value:this.searchValue,type:"text"}))))),l.a.createElement("div",{className:"video-container"},this.state.filteredData.map((function(e,t){return l.a.createElement("div",{className:"card-video",key:e.id},l.a.createElement("div",{className:"card-content"},l.a.createElement("div",{className:"content"},l.a.createElement("p",null,l.a.createElement(U.a,{format:"D MMM YYYY"},e.snippet.publishedAt)),l.a.createElement("p",{className:"title is-5"},e.snippet.title),l.a.createElement("p",null),e.users.map((function(e,t){return l.a.createElement("span",{key:t,className:"student-profile-small"},l.a.createElement("img",{src:e.image,alt:e.name}))})),l.a.createElement("p",null),l.a.createElement(r.b,{to:"/video/".concat(e._id),className:"button is-info is-small"},"Tag students"))))}))))}}]),a}(n.Component),M=a(39),V=a(38),I=a.n(V),D={content:{top:"20%",left:"30%",right:"30%",bottom:"20%",padding:20,margin:0},modal:{padding:0,margin:0}},x=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).tagUser=function(e){var t={username:e.username,videoID:n.state.taggedVideo._id};k.tagVideo(t).then((function(){n.setState({taggedStudent:e});var t=Object(M.a)(n.state.taggedStudentsArr);t.push(n.state.taggedStudent),n.getNewData(),n.setState({taggedStudentsArr:t})})).catch((function(e){return console.log(e)}))},n.untagUser=function(e){var t={username:e.username,videoID:n.state.taggedVideo._id};k.untagVideo(t).then((function(){n.setState({taggedStudent:e}),n.getNewData()})).catch((function(e){return console.log(e)}))},n.sendNotifications=function(){n.hideModal(),k.sendNotifications({taggedStudentsArr:n.state.taggedStudentsArr,videoID:n.state.taggedVideo}),n.props.history.push("/videos")},n.showModal=function(){n.state.taggedStudentsArr.length>0?n.setState({isOpen:!0}):n.props.history.push("/videos")},n.hideModal=function(){n.setState({isOpen:!1}),n.props.history.push("/videos")},n.state={students:[],taggedVideo:"",taggedStudent:"",loading:!0,isOpen:!1,taggedStudentsArr:[]},n}return Object(o.a)(a,[{key:"getNewData",value:function(){var e=this;k.fetchVideo({videoID:this.props.match.params.id}).then((function(t){e.setState({taggedVideo:t.data,loading:!1}),k.fetchStudentsVideo({videoID:e.state.taggedVideo._id}).then((function(t){e.setState({students:t.data})}))}))}},{key:"componentDidMount",value:function(){this.getNewData()}},{key:"render",value:function(){var e=this;if(this.state.loading)return l.a.createElement("div",null,"Loading");var t=this.state.taggedVideo.snippet.title;return l.a.createElement("div",{className:"card-video"},l.a.createElement("div",{className:"card-content"},l.a.createElement("div",{className:"content"},l.a.createElement("h2",{className:"video-modal"},t),l.a.createElement("p",null),this.state.taggedVideo.users.map((function(t,a){return l.a.createElement("div",{key:a},l.a.createElement("span",{key:a,className:"student-profile-small"}," ",l.a.createElement("img",{alt:t.username,src:t.image})),l.a.createElement("button",{className:"button is-danger is-small",onClick:function(a){return e.untagUser(t)}},l.a.createElement("span",null,"Untag student"))," ")})),l.a.createElement("p",null),this.state.students.map((function(t,a){return l.a.createElement("div",{key:a},l.a.createElement("span",{key:a,className:"student-profile-small mr-6"}," ",l.a.createElement("img",{alt:t.username,src:t.image}))," ",l.a.createElement("button",{className:"button is-success is-small",onClick:function(a){return e.tagUser(t)}},"Tag user"))})),l.a.createElement("p",null),l.a.createElement(I.a,{isOpen:this.state.isOpen,onRequestClose:function(){return e.hideModal()},style:D},l.a.createElement("div",{className:"modal-message"},l.a.createElement("div",{className:"modal-header-message"},l.a.createElement("p",{className:"modal-card-title"},"Send notifications"),l.a.createElement("button",{onClick:function(){return e.hideModal()},className:"delete"},"close")),l.a.createElement("div",{className:"modal-body-message"},l.a.createElement("ul",null,this.state.taggedStudentsArr.map((function(e){return console.log(e),l.a.createElement("li",null,l.a.createElement("span",{key:e.username,className:"student-profile-small"}," ",l.a.createElement("img",{alt:e.username,src:e.image}))," ",e.name)}))),l.a.createElement("p",null)),l.a.createElement("div",{className:"modal-footer-message"},l.a.createElement("button",{className:"button is-info",onClick:function(){return e.sendNotifications()}},"Send notifications"),l.a.createElement("button",{className:"button is-danger is-small",onClick:function(){return e.hideModal()}},"Close modal")))),l.a.createElement("button",{onClick:function(){return e.showModal()},className:"button is-info"},"Back to videos"))))}}]),a}(n.Component),A=p.a.create({baseURL:"".concat("https://pianolessenamsterdam.herokuapp.com/api","/user")}),P={FetchProfileStudent:function(e){return A.post("/profile-student",e)},UpdateProfileStudent:function(e){return A.post("/update-profile-student",e)},handleFileUpload:function(e){return A.post("/profileimage",e).then((function(e){return e.data}))}},F=(a(80),function(e){var t=e.user,a=t.username,n=t.name,s=t.surname,c=t.number,r=t.bio,i=t.image,o=t.showModal,m=t.emailnotifications,u=t.whatsappnotifications,d=e.handleClose,h=e.handleFileUpload,p=e.handleInput,f=e.handleSave,E=o?"display-block":"display-none";return l.a.createElement("div",{className:E},l.a.createElement("div",{className:"modal-background"}),l.a.createElement("div",{className:"modal-card"},l.a.createElement("header",{className:"modal-card-head"},l.a.createElement("p",{className:"modal-card-title"},"Edit Profile"),l.a.createElement("button",{onClick:d,className:"delete"},"close")),l.a.createElement("section",{className:"modal-card-body"},l.a.createElement("label",{for:"upload"},l.a.createElement("div",{className:"student-profile-editable"},l.a.createElement("img",{src:i,alt:n,className:"main-profile-img"}),l.a.createElement("input",{type:"file",style:{display:"none"},id:"upload",onChange:function(e){return h(e)}}),l.a.createElement(b.d,null))),l.a.createElement("label",{className:"label"},"Name"),l.a.createElement("input",{className:"input",onChange:p,placeholder:"Text input",name:"name",type:"text",value:n}),l.a.createElement("label",{className:"label"},"Surname"),l.a.createElement("input",{className:"input",onChange:p,placeholder:"Text input",name:"surname",type:"text",value:s}),l.a.createElement("label",{className:"label"},"Email"),l.a.createElement("input",{className:"input",onChange:p,placeholder:"Email input",name:"username",type:"text",value:a}),l.a.createElement("i",{className:"fa fa-warning"}),l.a.createElement("label",{className:"label"},"Description"),l.a.createElement("textarea",{className:"textarea",onChange:p,placeholder:"Describe Yourself!",name:"bio",value:r}),l.a.createElement("label",{className:"label"},"Phone Number"),l.a.createElement("input",{className:"input",onChange:p,placeholder:"Text input",name:"number",type:"text",value:c}),l.a.createElement("label",{className:"label"},"Send me notifications for every new video"),l.a.createElement("div",{className:"field"},l.a.createElement("input",{className:"is-checkradio is-success is-circle",style:{marginRight:10},checked:m,type:"checkbox",name:"emailnotifications",onChange:p}),l.a.createElement("label",{htmlFor:"email",style:{marginRight:20}},l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement(b.b,null))," E-mail"),l.a.createElement("input",{className:"is-checkradio is-success is-circle",style:{marginRight:10},checked:u,type:"checkbox",name:"whatsappnotifications",onChange:p}),l.a.createElement("label",{htmlFor:"whastapp"},l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement(b.e,null))," Whatsapp"))),l.a.createElement("footer",{className:"modal-card-foot"},l.a.createElement("a",{className:"button is-primary modal-save",href:"/save",onClick:function(e){return f(e)}},"Save changes"),l.a.createElement("button",{onClick:d,className:"button is-danger"},"close"))))}),L=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={username:e.props.user,loading:!0,role:"",videos:[],totalVideos:0,name:"",surname:"",bio:"",image:"",number:"",showModal:!1,flagButton:!0},e.showModal=function(){e.setState({showModal:!0,flagButton:!1})},e.hideModal=function(){e.setState({showModal:!1,flagButton:!0})},e.savePreferences=function(t){t.preventDefault(),e.setState({showModal:!1,flagButton:!0}),P.UpdateProfileStudent(e.state)},e.handleInput=function(t){console.log(t.target);var a=t.target,n=a.name,l=a.value;"checkbox"===t.target.type&&(l=t.target.checked),e.setState(Object(v.a)({},n,l))},e.handleFileUpload=function(t){var a=new FormData;a.append("image",t.target.files[0]),a.append("username",e.state.username),P.handleFileUpload(a).then((function(t){e.setState({image:t})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;P.FetchProfileStudent({username:this.state.username}).then((function(t){var a=t.data[0],n=a.name,l=a.surname,s=a.number,c=a.videos,r=a.bio,i=a.role,o=a.image,m=a.emailnotifications,u=a.whatsappnotifications;e.setState({videos:c,totalVideos:c.length,name:n,surname:l,number:s,bio:r,role:i,image:o,emailnotifications:m,whatsappnotifications:u,loading:!1})}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"container profile"},l.a.createElement("div",{className:"section profile-heading"},l.a.createElement("div",{className:"columns is-mobile is-multiline"},l.a.createElement("div",{className:"column is-2"},l.a.createElement("div",{className:"student-profile-editable"},l.a.createElement("img",{alt:this.state.name,src:this.state.image,className:"main-profile-img"}))),l.a.createElement("div",{className:"column is-4-tablet is-10-mobile name"},l.a.createElement("span",{className:"title is-bold"},this.state.name," ",this.state.surname),l.a.createElement("br",null),l.a.createElement(F,{user:this.state,handleSave:this.savePreferences,handleClose:this.hideModal,InputShow:this.InputShow,handleInput:this.handleInput,handleFileUpload:this.handleFileUpload}),this.state.flagButton&&l.a.createElement("button",{type:"button",className:"button is-primary is-outlined",onClick:this.showModal},"Edit preferences"),l.a.createElement("br",null),l.a.createElement("p",{className:"tagline"},this.state.bio)),l.a.createElement("div",{className:"column is-2-tablet is-4-mobile has-text-centered"},l.a.createElement("p",{className:"stat-val"},this.state.totalVideos),l.a.createElement("p",{className:"stat-key"},"videos")))),l.a.createElement("div",{className:"video-container"},this.state.videos.map((function(e,t){return l.a.createElement("div",{className:"card-video",key:e.id},l.a.createElement("div",{className:"card-image"},l.a.createElement("iframe",{allowtransparency:"true",title:t,width:"300",height:"215",src:"https://www.youtube.com/embed/"+e.snippet.resourceId.videoId,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),l.a.createElement("div",{className:"card-content"},l.a.createElement("div",{className:"content"},l.a.createElement("p",null,l.a.createElement(U.a,{format:"D MMM YYYY"},e.snippet.publishedAt)),l.a.createElement("p",{className:"title is-5"},e.snippet.title),l.a.createElement("p",null,e.snippet.description))))}))))}}]),a}(n.Component),T=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).checkAuthenticated=function(){console.log("check authenticated"),null===n.state.username&&n.service.isAuthenticated().then((function(e){console.log(e),n.setState({username:e.username,role:e.role,loading:!1})})).catch((function(e){n.setState({username:!1,role:!1,loading:!1})}))},n.setUser=function(e){console.log(e),n.setState({username:e.username,role:e.role})},n.state={videos:[],role:null,username:null,loggedInUser:null,loading:!1},n.service=new f,n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return this.checkAuthenticated(),this.state.loading?l.a.createElement("p",null,"loading"):"ADMIN"===this.state.role?l.a.createElement("div",null,l.a.createElement(d,null),l.a.createElement(E,{userInSession:this.state.loggedInUser,setUser:this.setUser}),l.a.createElement(N.d,null,l.a.createElement(N.b,{path:"/students",component:C}),l.a.createElement(N.b,{exact:!0,path:"/videos",component:j}),l.a.createElement(N.b,{exact:!0,path:"/video/:id",component:x}))):"USER"===this.state.role?l.a.createElement("div",null,l.a.createElement(d,null),l.a.createElement(g,{userInSession:this.state,setUser:this.setUser}),l.a.createElement(N.d,null,l.a.createElement(N.b,{exact:!0,path:"/myprofile/:id"},l.a.createElement(L,{user:this.state.username,setUser:this.setUser})))):l.a.createElement("div",null,l.a.createElement(d,null),l.a.createElement(N.d,null,l.a.createElement(N.b,{exact:!0,path:"/"},l.a.createElement("h3",null,"Home "),l.a.createElement(r.b,{to:"/login"},"Login"),l.a.createElement("p",null),l.a.createElement(r.b,{to:"signup"},"Signup")),l.a.createElement(N.b,{path:"/login",render:function(){return l.a.createElement(S,{setUser:e.setUser})}}),l.a.createElement(N.b,{path:"/signup",component:w})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(r.a,null,l.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.286ee65d.chunk.js.map