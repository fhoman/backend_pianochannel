(this["webpackJsonpfrontend-pianochannel"]=this["webpackJsonpfrontend-pianochannel"]||[]).push([[0],{31:function(e,t,n){e.exports=n(61)},36:function(e,t,n){},37:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(29),u=n.n(o),i=n(7),c=(n(36),n(3)),l=n(4),s=n(6),d=n(5);n(37),n(38);function m(){return r.a.createElement("div",{className:"header"},r.a.createElement("img",{src:"https://www.pianolessenamsterdam.nl/wp-content/uploads/2017/08/PianolessenAmsterdam.png",alt:"Pianolessen Amsterdam"}))}function h(){return r.a.createElement("div",{className:"subnav"},r.a.createElement("ul",null,r.a.createElement("li",null,"    ",r.a.createElement(i.b,{to:"/admin"},"Home admin")),r.a.createElement("li",null,"       ",r.a.createElement(i.b,{to:"/students"},"Students")),r.a.createElement("li",null,"   ",r.a.createElement(i.b,{to:"/videos"},"Videos"))))}var p=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"subnav"},r.a.createElement("ul",null,r.a.createElement("li",null,"    ",r.a.createElement(i.b,{to:"/profile"},"Profile"))))}}]),n}(a.Component),f=n(15),v=n(13),g=n.n(v),E=function e(){var t=this;Object(c.a)(this,e),this.signup=function(e,n,a,r){return t.service.post("/auth/signup",{username:e,password:n,campus:a,course:r}).then((function(e){return e.data}))},this.login=function(e,n){return t.service.post("/auth/login",{username:e,password:n}).then((function(e){return e.data}))},this.isAuthenticated=function(){return t.service.get("/auth/isLoggedIn").then((function(e){return e.data}))},this.logOut=function(){return t.service.post("/auth/logout").then((function(e){return e.data}))},this.service=g.a.create({baseURL:"".concat("https://pianolessenamsterdam.herokuapp.com","/admin"),withCredentials:!0})},b=n(1),O=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",service:new E,formSubmit:!1},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state.username,a=e.state.password;e.state.service.login(n,a).then((function(t){e.setState({username:"",password:"",formSubmit:!0}),e.props.setUser(t)})).catch((function(e){return console.log(e)}))},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(f.a)({},a,r))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return this.state.formSubmit?r.a.createElement(b.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",className:"form-control",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password:"),r.a.createElement("input",{name:"password",className:"form-control",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("input",{type:"submit",value:"Login"})),r.a.createElement("p",null,"Don't have account?",r.a.createElement(i.b,{to:"/signup"}," Signup")))}}]),n}(a.Component),j=g.a.create({baseURL:"".concat("https://pianolessenamsterdam.herokuapp.com","/admin")}),w={fetchVideos:function(){return j.post("/videos")},fetchVideo:function(e){return j.post("/video",e)},fetchStudents:function(){return j.post("/students")},fetchStudentsVideo:function(e){return console.log(e),j.post("/students-video",e)},addStudent:function(e){return console.log(e),j.post("/add-student",e)},tagVideo:function(e){return console.log(e),j.post("/tagvideo",e)},untagVideo:function(e){return console.log(e),j.post("/untagvideo",e)},FetchVideosStudent:function(e){return j.post("/profile/videos-student",e)}},S=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:""},e.handleInput=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(f.a)({},a,r))},e.handleSubmit=function(t){t.preventDefault(),w.addStudent({user:e.state.username}).then((function(e){return console.log("student added")})).catch((function(e){return console.log(e)}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("label",null,"Username"),r.a.createElement("input",{onChange:function(t){return e.handleInput(t)},name:"username",value:this.state.user}),r.a.createElement("input",{type:"submit",className:"input search-bar",value:"submit"})))}}]),n}(a.Component),y=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={users:[]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;w.fetchStudents().then((function(t){e.setState({users:t.data}),console.log(e.state)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.users.map((function(e,t){return r.a.createElement("div",{key:t},e.username,r.a.createElement("p",null))})))}}]),n}(a.Component),k=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={videos:[]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;w.fetchVideos().then((function(t){e.setState({videos:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.videos.map((function(e,t){return r.a.createElement("div",{key:e.id},e.snippet.title,r.a.createElement("p",null),r.a.createElement("img",{src:e.snippet.thumbnails.default.url,alt:e.snippet.title}),r.a.createElement(i.b,{to:"/video/".concat(e._id)},"Tag students"))})))}}]),n}(a.Component),V=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).tagUser=function(t){var n={username:t,videoID:e.state.taggedVideo._id};w.tagVideo(n).then((function(){e.setState({taggedStudent:t}),e.getNewData()})).catch((function(e){return console.log(e)}))},e.untagUser=function(t){var n={username:t,videoID:e.state.taggedVideo._id};w.untagVideo(n).then((function(){e.setState({taggedStudent:t}),e.getNewData()})).catch((function(e){return console.log(e)}))},e.state={students:[],taggedVideo:"",taggedStudent:"",loading:!0},e}return Object(l.a)(n,[{key:"getNewData",value:function(){var e=this;w.fetchVideo({videoID:this.props.match.params.id}).then((function(t){e.setState({taggedVideo:t.data,loading:!1}),w.fetchStudentsVideo({videoID:e.state.taggedVideo._id}).then((function(t){e.setState({students:t.data})}))}))}},{key:"componentDidMount",value:function(){this.getNewData()}},{key:"render",value:function(){var e=this;if(this.state.loading)return r.a.createElement("div",null,"Loading");var t=this.state.taggedVideo.snippet.title;return r.a.createElement("div",null,t,r.a.createElement("p",null),r.a.createElement("h3",null,"Tagged users"),this.state.taggedVideo.users.map((function(t,n){return r.a.createElement("div",{key:n},t.username," ",r.a.createElement("button",{onClick:function(n){return e.untagUser(t.username)}},"Untag student")," ")})),r.a.createElement("p",null),r.a.createElement("h3",null,"Untagged users "),this.state.students.map((function(t,n){return r.a.createElement("div",{key:n},t.username," ",r.a.createElement("button",{onClick:function(n){return e.tagUser(t.username)}},"Tag user"))})),r.a.createElement("p",null),r.a.createElement(i.b,{to:"/videos"},"Back to videos"))}}]),n}(a.Component),D=g.a.create({baseURL:"".concat("https://pianolessenamsterdam.herokuapp.com","/admin")}),C={FetchVideosStudent:function(e){return D.post("/videos-student",e)}},N=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"fhoman@gmail.com",videos:[],loading:!0},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;C.FetchVideosStudent({UserID:this.state.username}).then((function(t){console.log(t.data),e.setState({videos:t.data[0].videos,loading:!1})}))}},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",null,"Loading"):r.a.createElement("div",null,r.a.createElement("h3",null,"Student profile "),this.state.username,this.state.videos.map((function(e,t){return r.a.createElement("div",{key:t},e.snippet.title,r.a.createElement("p",null),r.a.createElement("iframe",{title:t,width:"560",height:"315",src:"https://www.youtube.com/embed/"+e.snippet.resourceId.videoId,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}))})))}}]),n}(a.Component),U=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={videos:[],role:"ADMIN",user:"admin@gmail.com"},e}return Object(l.a)(n,[{key:"render",value:function(){return null===this.state.user?r.a.createElement("div",null,r.a.createElement(m,null),r.a.createElement(O,null)):"ADMIN"===this.state.role?r.a.createElement("div",null,r.a.createElement(m,null),r.a.createElement(h,null),r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/admin"}," ",r.a.createElement(S,null)),r.a.createElement(b.b,{path:"/students",component:y}),r.a.createElement(b.b,{exact:!0,path:"/videos",component:k}),r.a.createElement(b.b,{exact:!0,path:"/video/:id",component:V}))):"USER"===this.state.role?r.a.createElement("div",null,r.a.createElement(m,null),r.a.createElement(p,null),r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/profile/:id"},r.a.createElement(N,null)))):void 0}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(i.a,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.67646c9c.chunk.js.map