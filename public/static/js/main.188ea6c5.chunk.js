(this["webpackJsonpfrontend-pianochannel"]=this["webpackJsonpfrontend-pianochannel"]||[]).push([[0],{26:function(e,t,a){},41:function(e,t,a){e.exports=a(82)},46:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),l=a(22),r=a.n(l),i=a(8),c=(a(46),a(2)),o=a(4),m=a(6),u=a(5);a(26),a(47);function d(){return s.a.createElement("div",{className:"header"},s.a.createElement("div",null,s.a.createElement("img",{src:"https://www.pianolessenamsterdam.nl/wp-content/uploads/2017/08/PianolessenAmsterdam.png",alt:"Pianolessen Amsterdam"})))}var p=a(14),h=a(17),f=a.n(h),E=function e(){var t=this;Object(c.a)(this,e),this.signup=function(e,a){return t.service.post("/auth/signup",{username:e,password:a}).then((function(e){return console.log(e),e}))},this.login=function(e,a){return t.service.post("/auth/login",{username:e,password:a}).then((function(e){return e.data}))},this.isAuthenticated=function(){return t.service.get("/auth/isLoggedIn").then((function(e){return e.data}))},this.logOut=function(){return t.service.post("/auth/logout").then((function(e){return e.data}))},this.service=f.a.create({baseURL:"".concat("https://pianolessenamsterdam.herokuapp.com/api","/"),withCredentials:!0})},g=a(9),v=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:"",service:new E,submitted:!1},e.handleSubmit=function(t){if(t.preventDefault(),e.setState({validationmessage:""}),""!==e.state.username&&""!==e.state.password){e.state.service.signup(e.state.username,e.state.password).then((function(t){var a=t.data.user,n=a.username,s=a.password;n&&s&&(e.setState({submitted:!0,username:"",password:"",validationmessage:""}),e.props.history.push("/login"))})).catch((function(e){return console.log(e)}));e.setState({validationmessage:"This username already exists"})}else{e.setState({validationmessage:"Please fill in a username and a password"})}},e.handleInput=function(t){e.setState({validationmessage:""});var a=t.target,n=a.name,s=a.value;e.setState(Object(p.a)({},n,s))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"columns is-multiline"},s.a.createElement("div",{className:"column is-8 is-offset-2 register"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column left"},s.a.createElement("div",{className:"notification is-light"},s.a.createElement("h1",{className:"title is-1"},"Pianolessen Amsterdam"),s.a.createElement("h2",{className:"subtitle has-text-danger"},"Sign up and check your videos"),s.a.createElement("p",null,"Sign up for an account on Pianolessen Amsterdam and check out all your videos "))),s.a.createElement("div",{className:"column is-half right"},s.a.createElement("div",{className:"notification is-light"},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Name"),s.a.createElement("div",{className:"control has-icons-left has-icons-right"},s.a.createElement("input",{className:"input",type:"email",value:this.state.username,name:"username",onChange:function(t){return e.handleInput(t)},placeholder:"Email"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(g.b,null)),s.a.createElement("span",{className:"icon is-small is-right"},s.a.createElement(g.a,null)))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Password:"),s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("input",{className:"input",type:"password",value:this.state.password,name:"password",onChange:function(t){return e.handleInput(t)},placeholder:"Password"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(g.c,null))),s.a.createElement("p",{className:"help is-danger"},this.state.validationmessage)),s.a.createElement("button",{className:"button is-info is-rounded mb-6",onClick:function(t){return e.handleSubmit(t)}},"Signup"),s.a.createElement("p",{className:"control mt-6"},"Already have a account?",s.a.createElement(i.b,{to:"/login"},"Login")))))))," ")}}]),a}(n.Component),N=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).logoutUser=function(){console.log(n.props),n.service.logOut().then((function(){n.setState({loggedInUser:null}),console.log(n.props),n.props.setUser({username:null,role:null,loggedInUser:null})}))},n.state={loggedInUser:null,username:null,role:null,active:!0},n.service=new E,n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"profile-options is-fullwidth"},s.a.createElement("div",{className:"tabs is-fullwidth is-medium"},s.a.createElement("ul",null,s.a.createElement("li",{className:"link"},s.a.createElement(i.c,{to:"/students",activeStyle:{color:"red"}},s.a.createElement("span",{className:"icon"},s.a.createElement("i",{className:"fa fa-thumbs-up"})),s.a.createElement("span",null,"Students"))),s.a.createElement("li",{className:"link"},s.a.createElement(i.c,{to:"/videos",activeStyle:{color:"red"}},s.a.createElement("span",{className:"icon"},s.a.createElement("i",{className:"fa fa-search"})),s.a.createElement("span",null,"Videos"))),s.a.createElement("li",{className:"link"},s.a.createElement(i.c,{to:"/login",onClick:function(){return e.logoutUser()},activeStyle:{color:"red"}},s.a.createElement("span",{className:"icon"},s.a.createElement("i",{className:"fa fa-balance-scale"})),s.a.createElement("span",null,"Logout"))))))}}]),a}(n.Component),b=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).logoutUser=function(){console.log(n.props),n.service.logOut().then((function(){n.setState({loggedInUser:null}),console.log(n.props),n.props.setUser({username:null,role:null,loggedInUser:null})}))},n.state={loggedInUser:null,username:null,role:null},n.service=new E,n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.userInSession,t=e.username,a=e.loggedInUser;this.setState({username:t,loggedInUser:a})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"profile-options is-fullwidth"},s.a.createElement("div",{className:"tabs is-fullwidth is-medium"},s.a.createElement("ul",null,s.a.createElement("li",{className:"link"},s.a.createElement(i.c,{to:"/myprofile/".concat(this.state.username),activeStyle:{color:"red"}},s.a.createElement("span",{className:"icon"},s.a.createElement("i",{className:"fa fa-thumbs-up"})),s.a.createElement("span",null,"Profile"))),s.a.createElement("li",{className:"link"},s.a.createElement(i.c,{to:"/login",onClick:function(){return e.logoutUser()},activeStyle:{color:"red"}},s.a.createElement("span",{className:"icon"},s.a.createElement("i",{className:"fa fa-balance-scale"})),s.a.createElement("span",null,"Logout"))))))}}]),a}(n.Component),S=a(3),w=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:"",usernameTemp:"",role:"",service:new E,formSubmit:!1},e.handleSubmit=function(t){t.preventDefault();var a=e.state.username,n=e.state.password;if(""!==a&&""!==n)e.state.service.login(a,n).then((function(t){e.setState({username:"",password:"",role:t.role,usernameTemp:t.username,formSubmit:!0}),e.props.setUser(t)})).catch((function(t){console.log(t);e.setState({validationmessage:"your username or password are not valid"})}));else{e.setState({validationmessage:"Please fill in a username and password"})}},e.handleInput=function(t){e.setState({validationmessage:""});var a=t.target,n=a.name,s=a.value;e.setState(Object(p.a)({},n,s))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t="/myprofile/".concat(this.state.usernameTemp);return this.state.formSubmit&&"USER"===this.state.role?s.a.createElement(S.a,{to:t}):this.state.formSubmit&&"ADMIN"===this.state.role?s.a.createElement(S.a,{to:"/students/"}):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"columns is-multiline"},s.a.createElement("div",{className:"column is-8 is-offset-2 register"},s.a.createElement("div",{className:"columns is-centered"},s.a.createElement("div",{className:"column is-half"},s.a.createElement("div",{className:"notification is-light"},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Username"),s.a.createElement("div",{className:"control has-icons-left has-icons-right"},s.a.createElement("input",{className:"input",type:"email",value:this.state.username,name:"username",onChange:function(t){return e.handleInput(t)},placeholder:"Email"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(g.b,null)))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Password:"),s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("input",{className:"input",type:"password",value:this.state.password,name:"password",onChange:function(t){return e.handleInput(t)},placeholder:"Password"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(g.c,null))),s.a.createElement("p",{className:"help is-danger"},this.state.validationmessage)),s.a.createElement("button",{className:"button is-info is-rounded mb-6",onClick:function(t){return e.handleSubmit(t)}},"Login"),s.a.createElement("p",{className:"control mt-6"},"Don't have an account?",s.a.createElement(i.b,{to:"/signup"},"Signup"))))))))}}]),a}(n.Component),y=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:"",service:new E,submitted:!1},e.handleSubmit=function(t){if(t.preventDefault(),e.setState({validationmessage:""}),""!==e.state.username&&""!==e.state.password){e.state.service.signup(e.state.username,e.state.password).then((function(t){var a=t.data.user,n=a.username,s=a.password;n&&s&&(e.setState({submitted:!0,username:"",password:"",validationmessage:""}),e.props.history.push("/login"))})).catch((function(e){return console.log(e)}));e.setState({validationmessage:"This username already exists"})}else{e.setState({validationmessage:"Please fill in a username and a password"})}},e.handleInput=function(t){e.setState({validationmessage:""});var a=t.target,n=a.name,s=a.value;e.setState(Object(p.a)({},n,s))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=window.location.href,t=new URL(e).searchParams.get("mail");return t&&(console.log(t),this.setState({username:t})),null}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"columns is-multiline"},s.a.createElement("div",{className:"column is-8 is-offset-2 register"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column left"},s.a.createElement("div",{className:"notification is-light"},s.a.createElement("h1",{className:"title is-1"},"Pianolessen Amsterdam"),s.a.createElement("h2",{className:"subtitle has-text-danger"},"Sign up and check your videos"),s.a.createElement("p",null,"Sign up for an account on Pianolessen Amsterdam and check out all your videos "))),s.a.createElement("div",{className:"column is-half right"},s.a.createElement("div",{className:"notification is-light"},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Name"),s.a.createElement("div",{className:"control has-icons-left has-icons-right"},s.a.createElement("input",{className:"input",type:"email",value:this.state.username,name:"username",onChange:function(t){return e.handleInput(t)},placeholder:"Email"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(g.b,null)),s.a.createElement("span",{className:"icon is-small is-right"},s.a.createElement(g.a,null)))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Password:"),s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("input",{className:"input",type:"password",value:this.state.password,name:"password",onChange:function(t){return e.handleInput(t)},placeholder:"Password"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(g.c,null))),s.a.createElement("p",{className:"help is-danger"},this.state.validationmessage)),s.a.createElement("button",{className:"button is-info is-rounded mb-6",onClick:function(t){return e.handleSubmit(t)}},"Signup"),s.a.createElement("p",{className:"control mt-6"},"Already have a account?",s.a.createElement(i.b,{to:"/login"},"Login")))))))," ")}}]),a}(n.Component),k=f.a.create({baseURL:"".concat("https://pianolessenamsterdam.herokuapp.com/api","/admin")}),O={fetchVideos:function(){return k.post("/videos")},fetchVideo:function(e){return k.post("/video",e)},fetchStudents:function(){return k.post("/students")},fetchStudentsVideo:function(e){return k.post("/students-video",e)},tagVideo:function(e){return k.post("/tagvideo",e)},untagVideo:function(e){return k.post("/untagvideo",e)},mailNewUser:function(e){return k.post("/mail-user",{email:e})},sendNotifications:function(e){return console.log(e),k.post("/send-notification",e)},deleteUser:function(e){return console.log(e),k.post("/delete-user",{userID:e})}},C=a(0),U=a(18),M=a.n(U),j={content:{top:"20%",left:"30%",right:"30%",bottom:"20%",padding:20,margin:0},modal:{padding:0,margin:0}},I=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,s=a.value;e.setState(Object(p.a)({},n,s))},e.onSubmit=function(t){t.preventDefault(),O.mailNewUser(e.state.email),e.setState({email:"",showMessage:!0,tempMail:e.state.email}),setTimeout((function(){e.setState({showMessage:!1})}),2e3)},e.deleteUser=function(t){e.setState({isOpen:!1}),O.deleteUser(t).then((function(t){console.log(t),e.setState({users:t.data})}))},e.showModal=function(){e.setState({isOpen:!0})},e.hideModal=function(){e.setState({isOpen:!1})},e.state={users:[],email:"",tempMail:"",showMessage:!1,deletedUserID:"",isOpen:!1},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.fetchStudents().then((function(t){e.setState({users:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"box"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-2-tablet is-4-mobile has-text-centered"},s.a.createElement("p",{className:"stat-val"},this.state.totalVideos)),s.a.createElement("div",{className:"column is-8"},s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",onChange:function(t){return e.handleChange(t)},name:"email",value:this.state.email,type:"email",placeholder:"Email adress"})),s.a.createElement("div",{className:"control"},s.a.createElement("a",{href:"/students",onClick:function(t){return e.onSubmit(t)},className:"button is-info"},"Invite student"))),this.state.showMessage&&s.a.createElement("div",{className:"notification is-success"}," An invitation has been send to ",this.state.tempMail)))),s.a.createElement("table",{className:"table is-bordered is-striped is-narrow is-hoverable is-fullwidth"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Profile picture"),s.a.createElement("th",null,"Name"),s.a.createElement("th",null,"Surname"),s.a.createElement("th",null,"Email"),s.a.createElement("th",null,"Telephone"),s.a.createElement("th",null))),s.a.createElement("tbody",null,this.state.users.map((function(t,a){return s.a.createElement("tr",{key:a},s.a.createElement("td",null,s.a.createElement("span",{className:"student-profile-small"},s.a.createElement("img",{src:t.image,alt:t.name}))),s.a.createElement("td",null,t.name),s.a.createElement("td",null,t.surname),s.a.createElement("td",null,t.username),s.a.createElement("td",null,t.number),s.a.createElement(M.a,{isOpen:e.state.isOpen,onRequestClose:function(){return e.hideModal()},style:j},s.a.createElement("div",{className:"modal-message"},s.a.createElement("div",{className:"modal-header-message"},s.a.createElement("p",{className:"modal-card-title"},"Delete user"),s.a.createElement("button",{onClick:function(){return e.hideModal()},className:"delete"},"close")),s.a.createElement("div",{className:"modal-body-message"},s.a.createElement("p",null)),s.a.createElement("p",null,"Are you sure you want to delete ",t.username,"?"),s.a.createElement("p",null),s.a.createElement("br",null),s.a.createElement("div",{className:"modal-footer-message"},s.a.createElement("button",{className:"button is-info",onClick:function(a){return e.deleteUser(t._id)}},"Delete user"),s.a.createElement("button",{className:"button is-danger is-small",onClick:function(){return e.hideModal()}},"Close modal")))),s.a.createElement("td",{onClick:function(){return e.showModal()}},s.a.createElement(C.b.Provider,{value:{className:"delete-icon"}},"  ",s.a.createElement(g.d,null))))})))))}}]),a}(n.Component),D=a(19),V=a.n(D),x=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={videos:[],filteredData:[],totalVideos:0,taggedVideo:"",taggedStudent:"",loading:!0,searchValue:"",showVideoCardModal:""},e.showModal=function(){e.setState({showVideoCardModal:!0})},e.hideModal=function(){e.setState({showVideoCardModal:!1})},e.inputSearchHandler=function(t){console.log(t);var a=e.state.videos.filter((function(e){return e.snippet.title.toLowerCase().includes(t)}));console.log(a),e.setState({searchValue:t,filteredData:a})},e.untagUser=function(t,a){console.log(a,t);var n={username:a,videoID:t};O.untagVideo(n).then((function(){e.setState({taggedStudent:a}),e.getNewData()})).catch((function(e){return console.log(e)}))},e}return Object(o.a)(a,[{key:"getNewData",value:function(){var e=this;O.fetchVideos().then((function(t){console.log(t.data),e.setState({videos:t.data,filteredData:t.data,totalVideos:t.data.length,loading:!1})})).catch((function(e){return console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;O.fetchVideos().then((function(t){console.log(t.data),e.setState({videos:t.data,filteredData:t.data,totalVideos:t.data.length,loading:!1})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return this.state.loading?s.a.createElement("p",{className:"columns is-centered"},"Loading videos"):0===this.state.filteredData.length?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"box"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-2-tablet is-4-mobile has-text-centered"},s.a.createElement("p",{className:"stat-val"},this.state.totalVideos),s.a.createElement("p",{className:"stat-key"},"Videos")),s.a.createElement("div",{className:"column is-8"},s.a.createElement("p",{className:"control has-addons"},s.a.createElement("input",{className:"input",placeholder:"Search videos",onChange:function(t){return e.inputSearchHandler(t.target.value)},value:this.searchValue,type:"text"}))),"     ")),s.a.createElement("p",{className:"columns is-centered"},"There are no results"),s.a.createElement("p",null)):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"box"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-2-tablet is-4-mobile has-text-centered"},s.a.createElement("p",{className:"stat-val"},this.state.totalVideos),s.a.createElement("p",{className:"stat-key"},"Videos")),s.a.createElement("div",{className:"column is-8"},s.a.createElement("p",{className:"control has-addons"},s.a.createElement("input",{className:"input",placeholder:"Search videos",onChange:function(t){return e.inputSearchHandler(t.target.value)},value:this.searchValue,type:"text"}))))),s.a.createElement("div",{className:"video-container"},this.state.filteredData.map((function(e,t){return s.a.createElement("div",{className:"card-video",key:e.id},s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"content"},s.a.createElement("p",null,s.a.createElement(V.a,{format:"D MMM YYYY"},e.snippet.publishedAt)),s.a.createElement("p",{className:"title is-5"},e.snippet.title),s.a.createElement("p",null),e.users.map((function(e,t){return s.a.createElement("span",{key:t,className:"student-profile-small"},s.a.createElement("img",{src:e.image,alt:e.name}))})),s.a.createElement("p",null),s.a.createElement(i.b,{to:"/video/".concat(e._id),className:"button is-info is-small"},"Tag students"))))}))))}}]),a}(n.Component),A=a(40),P={content:{top:"20%",left:"30%",right:"30%",bottom:"20%",padding:20,margin:0},modal:{padding:0,margin:0}},F=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).tagUser=function(e){var t={username:e.username,videoID:n.state.taggedVideo._id};O.tagVideo(t).then((function(){n.setState({taggedStudent:e});var t=Object(A.a)(n.state.taggedStudentsArr);t.push(n.state.taggedStudent),n.getNewData(),n.setState({taggedStudentsArr:t})})).catch((function(e){return console.log(e)}))},n.untagUser=function(e){var t={username:e.username,videoID:n.state.taggedVideo._id};O.untagVideo(t).then((function(){n.setState({taggedStudent:e}),n.getNewData()})).catch((function(e){return console.log(e)}))},n.sendNotifications=function(){n.hideModal(),O.sendNotifications({taggedStudentsArr:n.state.taggedStudentsArr,videoID:n.state.taggedVideo}),n.props.history.push("/videos")},n.showModal=function(){n.state.taggedStudentsArr.length>0?n.setState({isOpen:!0}):n.props.history.push("/videos")},n.hideModal=function(){n.setState({isOpen:!1}),n.props.history.push("/videos")},n.state={students:[],taggedVideo:"",taggedStudent:"",loading:!0,isOpen:!1,taggedStudentsArr:[]},n}return Object(o.a)(a,[{key:"getNewData",value:function(){var e=this;O.fetchVideo({videoID:this.props.match.params.id}).then((function(t){e.setState({taggedVideo:t.data,loading:!1}),O.fetchStudentsVideo({videoID:e.state.taggedVideo._id}).then((function(t){e.setState({students:t.data})}))}))}},{key:"componentDidMount",value:function(){this.getNewData()}},{key:"render",value:function(){var e=this;if(this.state.loading)return s.a.createElement("div",null,"Loading");var t=this.state.taggedVideo.snippet.title;return s.a.createElement("div",{className:"card-video"},s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"content"},s.a.createElement("h2",{className:"video-modal"},t),s.a.createElement("p",null),this.state.taggedVideo.users.map((function(t,a){return s.a.createElement("div",{key:a},s.a.createElement("span",{key:a,className:"student-profile-small"}," ",s.a.createElement("img",{alt:t.username,src:t.image})),s.a.createElement("button",{className:"button is-danger is-small",onClick:function(a){return e.untagUser(t)}},s.a.createElement("span",null,"Untag student"))," ")})),s.a.createElement("p",null),this.state.students.map((function(t,a){return s.a.createElement("div",{key:a},s.a.createElement("span",{key:a,className:"student-profile-small mr-6"}," ",s.a.createElement("img",{alt:t.username,src:t.image}))," ",s.a.createElement("button",{className:"button is-success is-small",onClick:function(a){return e.tagUser(t)}},"Tag user"))})),s.a.createElement("p",null),s.a.createElement(M.a,{isOpen:this.state.isOpen,onRequestClose:function(){return e.hideModal()},style:P},s.a.createElement("div",{className:"modal-message"},s.a.createElement("div",{className:"modal-header-message"},s.a.createElement("p",{className:"modal-card-title"},"Send notifications"),s.a.createElement("button",{onClick:function(){return e.hideModal()},className:"delete"},"close")),s.a.createElement("div",{className:"modal-body-message"},s.a.createElement("ul",null,this.state.taggedStudentsArr.map((function(e){return s.a.createElement("li",null,s.a.createElement("span",{key:e.username,className:"student-profile-small"}," ",s.a.createElement("img",{alt:e.username,src:e.image}))," ",e.name)}))),s.a.createElement("p",null)),s.a.createElement("div",{className:"modal-footer-message"},s.a.createElement("button",{className:"button is-info",onClick:function(){return e.sendNotifications()}},"Send notifications"),s.a.createElement("button",{className:"button is-danger is-small",onClick:function(){return e.hideModal()}},"Close")))),s.a.createElement("button",{onClick:function(){return e.showModal()},className:"button is-info"},"Back to videos"))))}}]),a}(n.Component),L=f.a.create({baseURL:"".concat("https://pianolessenamsterdam.herokuapp.com/api","/user")}),T={FetchProfileStudent:function(e){return L.post("/profile-student",e)},UpdateProfileStudent:function(e){return L.post("/update-profile-student",e)},handleFileUpload:function(e){return L.post("/profileimage",e).then((function(e){return e.data}))}},R=(a(81),function(e){var t=e.user,a=t.username,n=t.name,l=t.surname,r=t.number,i=t.bio,c=t.image,o=t.showModal,m=t.emailnotifications,u=t.whatsappnotifications,d=e.handleClose,p=e.handleFileUpload,h=e.handleInput,f=e.handleSave,E=o?"display-block":"display-none";return s.a.createElement("div",{className:E},s.a.createElement("div",{className:"modal-background"}),s.a.createElement("div",{className:"modal-card"},s.a.createElement("header",{className:"modal-card-head"},s.a.createElement("p",{className:"modal-card-title"},"Edit Profile"),s.a.createElement("button",{onClick:d,className:"delete"},"close")),s.a.createElement("section",{className:"modal-card-body"},s.a.createElement("label",{htmlFor:"upload"},s.a.createElement("div",{className:"student-profile-editable"},s.a.createElement("img",{src:c,alt:n,className:"main-profile-img"}),s.a.createElement("input",{type:"file",style:{display:"none"},id:"upload",onChange:function(e){return p(e)}}),s.a.createElement(g.e,null))),s.a.createElement("label",{className:"label"},"Name"),s.a.createElement("input",{className:"input",onChange:h,placeholder:"Text input",name:"name",type:"text",value:n}),s.a.createElement("label",{className:"label"},"Surname"),s.a.createElement("input",{className:"input",onChange:h,placeholder:"Text input",name:"surname",type:"text",value:l}),s.a.createElement("label",{className:"label"},"Email"),s.a.createElement("input",{className:"input",onChange:h,placeholder:"Email input",name:"username",type:"text",value:a}),s.a.createElement("i",{className:"fa fa-warning"}),s.a.createElement("label",{className:"label"},"Description"),s.a.createElement("textarea",{className:"textarea",onChange:h,placeholder:"Describe Yourself!",name:"bio",value:i}),s.a.createElement("label",{className:"label"},"Phone Number"),s.a.createElement("input",{className:"input",onChange:h,placeholder:"Text input",name:"number",type:"text",value:r}),s.a.createElement("label",{className:"label"},"Send me notifications for every new video"),s.a.createElement("div",{className:"field"},s.a.createElement("input",{className:"is-checkradio is-success is-circle",style:{marginRight:10},value:m,checked:m,type:"checkbox",name:"emailnotifications",onChange:h}),s.a.createElement("label",{htmlFor:"email",style:{marginRight:20}},s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(g.b,null))," E-mail"),s.a.createElement("input",{className:"is-checkradio is-success is-circle",style:{marginRight:10},value:u,checked:u,type:"checkbox",name:"whatsappnotifications",onChange:h}),s.a.createElement("label",{htmlFor:"whastapp"},s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(g.f,null))," Whatsapp"))),s.a.createElement("footer",{className:"modal-card-foot"},s.a.createElement("a",{className:"button is-primary modal-save",href:"/save",onClick:function(e){return f(e)}},"Save changes"),s.a.createElement("button",{onClick:d,className:"button is-danger"},"close"))))}),B=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={username:e.props.user,loading:!0,role:"",videos:[],totalVideos:0,name:"",surname:"",bio:"",image:"",number:"",showModal:!1,flagButton:!0},e.showModal=function(){e.setState({showModal:!0,flagButton:!1})},e.hideModal=function(){e.setState({showModal:!1,flagButton:!0})},e.savePreferences=function(t){t.preventDefault(),e.setState({showModal:!1,flagButton:!0}),T.UpdateProfileStudent(e.state)},e.handleInput=function(t){console.log(t.target);var a=t.target,n=a.name,s=a.value;"checkbox"===t.target.type&&(s=t.target.checked),e.setState(Object(p.a)({},n,s))},e.handleFileUpload=function(t){var a=new FormData;a.append("image",t.target.files[0]),a.append("username",e.state.username),T.handleFileUpload(a).then((function(t){e.setState({image:t})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;T.FetchProfileStudent({username:this.state.username}).then((function(t){var a=t.data[0],n=a.name,s=a.surname,l=a.number,r=a.videos,i=a.bio,c=a.role,o=a.image,m=a.emailnotifications,u=a.whatsappnotifications;e.setState({videos:r,totalVideos:r.length,name:n,surname:s,number:l,bio:i,role:c,image:o,emailnotifications:m,whatsappnotifications:u,loading:!1})}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"container profile"},s.a.createElement("div",{className:"section profile-heading"},s.a.createElement("div",{className:"columns is-mobile is-multiline"},s.a.createElement("div",{className:"column is-2"},s.a.createElement("div",{className:"student-profile-editable"},s.a.createElement("img",{alt:this.state.name,src:this.state.image,className:"main-profile-img"}))),s.a.createElement("div",{className:"column is-4-tablet is-10-mobile name"},s.a.createElement("span",{className:"title is-bold"},this.state.name," ",this.state.surname),s.a.createElement("br",null),s.a.createElement(R,{user:this.state,handleSave:this.savePreferences,handleClose:this.hideModal,InputShow:this.InputShow,handleInput:this.handleInput,handleFileUpload:this.handleFileUpload}),this.state.flagButton&&s.a.createElement("button",{type:"button",className:"button is-primary is-outlined",onClick:this.showModal},"Edit preferences"),s.a.createElement("br",null),s.a.createElement("p",{className:"tagline"},this.state.bio)),s.a.createElement("div",{className:"column is-2-tablet is-4-mobile has-text-centered"},s.a.createElement("p",{className:"stat-val"},this.state.totalVideos),s.a.createElement("p",{className:"stat-key"},"videos")))),s.a.createElement("div",{className:"video-container"},this.state.videos.map((function(e,t){return s.a.createElement("div",{className:"card-video",key:e.id},s.a.createElement("div",{className:"card-image"},s.a.createElement("iframe",{allowtransparency:"true",title:t,width:"300",height:"215",src:"https://www.youtube.com/embed/"+e.snippet.resourceId.videoId,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"content"},s.a.createElement("p",null,s.a.createElement(V.a,{format:"D MMM YYYY"},e.snippet.publishedAt)),s.a.createElement("p",{className:"title is-5"},e.snippet.title),s.a.createElement("p",null,e.snippet.description))))}))))}}]),a}(n.Component),Y=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).checkAuthenticated=function(){console.log("check authenticated"),null===n.state.username&&n.service.isAuthenticated().then((function(e){console.log(e),n.setState({username:e.username,role:e.role,loading:!1})})).catch((function(e){n.setState({username:!1,role:!1,loading:!1})}))},n.setUser=function(e){console.log(e),n.setState({username:e.username,role:e.role})},n.state={videos:[],role:null,username:null,loggedInUser:null,loading:!1},n.service=new E,n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return this.checkAuthenticated(),this.state.loading?s.a.createElement("p",null,"loading"):"ADMIN"===this.state.role?s.a.createElement("div",null,s.a.createElement(d,null),s.a.createElement(N,{userInSession:this.state.loggedInUser,setUser:this.setUser}),s.a.createElement(S.d,null,s.a.createElement(S.b,{path:"/students",component:I}),s.a.createElement(S.b,{exact:!0,path:"/videos",component:x}),s.a.createElement(S.b,{exact:!0,path:"/video/:id",component:F}))):"USER"===this.state.role?s.a.createElement("div",null,s.a.createElement(d,null),s.a.createElement(b,{userInSession:this.state,setUser:this.setUser}),s.a.createElement(S.d,null,s.a.createElement(S.b,{exact:!0,path:"/myprofile/:id"},s.a.createElement(B,{user:this.state.username,setUser:this.setUser})))):s.a.createElement("div",null,s.a.createElement(d,null),s.a.createElement(S.d,null,s.a.createElement(S.b,{exact:!0,path:"/",component:v}),s.a.createElement(S.b,{exact:!0,path:"/login",render:function(){return s.a.createElement(w,{setUser:e.setUser})}}),s.a.createElement(S.b,{exact:!0,path:"/signup",component:y})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(i.a,null,s.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.188ea6c5.chunk.js.map